---
interface Props {
	type?: 'info' | 'success' | 'warning' | 'error';
	dismissible?: boolean;
}

const {
	type = 'info',
	dismissible = false
} = Astro.props;
---

<div class={`alert alert-${type}`} data-dismissible={dismissible}>
	<div class="alert-content">
		<slot />
	</div>
	{dismissible && (
		<button class="alert-close" data-dismiss>Ã—</button>
	)}
</div>

{dismissible && (
	<script>
		document.addEventListener('DOMContentLoaded', () => {
			document.querySelectorAll('[data-dismiss]').forEach((btn) => {
				btn.addEventListener('click', (e) => {
					const alert = (e.target as HTMLElement).closest('.alert');
					if (alert) {
						alert.style.display = 'none';
					}
				});
			});
		});
	</script>
)}

<style>
	.alert {
		padding: 1rem;
		border-radius: 0.375rem;
		display: flex;
		align-items: start;
		justify-content: space-between;
		gap: 1rem;
	}

	.alert-content {
		flex: 1;
	}

	.alert-close {
		background: none;
		border: none;
		font-size: 1.5rem;
		cursor: pointer;
		padding: 0;
		line-height: 1;
		opacity: 0.6;
		transition: opacity 0.2s;
	}

	.alert-close:hover {
		opacity: 1;
	}

	.alert-info {
		background: #dbeafe;
		color: #1e40af;
		border: 1px solid #93c5fd;
	}

	.alert-success {
		background: #d1fae5;
		color: #065f46;
		border: 1px solid #6ee7b7;
	}

	.alert-warning {
		background: #fef3c7;
		color: #92400e;
		border: 1px solid #fcd34d;
	}

	.alert-error {
		background: #fee2e2;
		color: #991b1b;
		border: 1px solid #fca5a5;
	}
</style>
