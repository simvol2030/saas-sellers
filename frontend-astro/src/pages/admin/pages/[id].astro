---
/**
 * Edit Page
 */
import Admin from '../../../layouts/Admin.astro';
import PageEditor from '../../../components/admin/PageEditor.svelte';

export const prerender = false;

const { id } = Astro.params;
const pageId = parseInt(id || '0', 10);

if (isNaN(pageId) || pageId <= 0) {
  return Astro.redirect('/admin/pages');
}
---

<Admin title="Редактирование страницы">
  <script is:inline>
    (function() {
      if (!localStorage.getItem('accessToken')) {
        window.location.href = '/admin/login';
      }
    })();
  </script>

  <PageEditor pageId={pageId} client:load />
</Admin>
